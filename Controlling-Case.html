function restoreNavigationState() {
    const savedState = localStorage.getItem('cfo-dashboard-state');
    if (!savedState) return;
    
    try {
        const state = JSON.parse(savedState);
        
        // Tab wiederherstellen
        if (state.mainTab) {
            // MANUELL alle Tabs deaktivieren
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // MANUELL den richtigen Tab aktivieren
            const tabBtn = document.querySelector(`[onclick="switchTab('${state.mainTab}')"]`);
            const tabContent = document.getElementById(`tab-${state.mainTab}`);
            
            if (tabBtn) tabBtn.classList.add('active');
            if (tabContent) tabContent.classList.add('active');
        }
        
        // Artikel-Detail wiederherstellen
        if (state.view === 'detail' && state.artikel && state.mainTab === 'assumptions') {
            setTimeout(() => {
                openArtikelDetail(state.artikel);
                
                if (state.detailTab && state.detailTab !== 'artikel') {
                    setTimeout(() => {
                        if (typeof switchArtikelDetailTab === 'function') {
                            switchArtikelDetailTab(state.detailTab);
                        }
                    }, 100);
                }
            }, 100);
        }
    } catch (e) {
        console.error('Fehler beim Wiederherstellen:', e);
    }
}
