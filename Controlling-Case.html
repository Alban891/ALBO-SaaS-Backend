function switchDetailTab(tabName) {
    // Remove active styles from all tabs
    document.querySelectorAll('.detail-tab').forEach(tab => {
        tab.style.color = 'var(--gray)';
        tab.style.borderBottomColor = 'transparent';
    });
    
    // Set active tab
    event.target.style.color = 'var(--primary)';
    event.target.style.borderBottomColor = 'var(--primary)';
    
    // Get content container
    const contentDiv = document.getElementById('detail-tab-content');
    if (!contentDiv) return;
    
    // Switch content based on tab
    switch(tabName) {
        case 'artikel':
            contentDiv.innerHTML = getArtikelTabContent();
            loadArtikelData();
            break;
        case 'projekte':
            contentDiv.innerHTML = getProjekteTabContent();
            break;
        case 'wirtschaft':
            contentDiv.innerHTML = getWirtschaftlichkeitTabContent();
            break;
    }
}

// Dashboard control functions
function adjustAssumption(type, value) {
    switch(type) {
        case 'market':
            document.getElementById('market-value').textContent = value + '%';
            break;
        case 'price':
            const priceDiff = value - 100;
            document.getElementById('price-value').textContent = (priceDiff >= 0 ? '+' : '') + priceDiff + '%';
            break;
        case 'capex':
            const capexText = value > 110 ? '√úberschreitung' : value < 90 ? 'Einsparung' : 'Plan';
            document.getElementById('capex-value').textContent = capexText;
            break;
    }
}

function toggleArtikel(filter) {
    document.querySelectorAll('.artikel-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
}

function aiAction(action) {
    cfoDashboard.aiController.addAIMessage({
        level: 'info',
        title: 'üîç ' + action.replace('-', ' ').toUpperCase(),
        text: 'Analyse wird durchgef√ºhrt...',
        timestamp: 'AI Action'
    });
}

function saveArtikelChanges() {
    cfoDashboard.aiController.addAIMessage({
        level: 'success',
        title: '‚úÖ √Ñnderungen gespeichert',
        text: 'Artikel-Parameter aktualisiert.',
        timestamp: 'Speicherung'
    });
    backToArtikelOverview();
}

// Artikel data loading functions
function loadArtikelData() {
    // Implementation for loading artikel data
    console.log('Loading artikel data...');
}

function loadYearData(year) {
    // Implementation for loading year-specific data
    console.log('Loading data for year:', year);
}

function calculateFinancials() {
    // Implementation for financial calculations
    console.log('Calculating financials...');
}

function updateTotals() {
    // Implementation for updating totals
    console.log('Updating totals...');
}

function updateCalculations() {
    // Implementation for updating calculations
    console.log('Updating calculations...');
}

function calculateYearOverYear() {
    // Implementation for YoY calculations
    console.log('Calculating YoY...');
}

function applyVolumeModel(model) {
    // Implementation for volume models
    console.log('Applying volume model:', model);
}

function updateHKProStueck() {
    // Implementation for HK updates
    console.log('Updating HK...');
}

// Initialize everything when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    initializeCharts();
    initializeAI();
});
